{"remainingRequest":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/message/MessageView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/message/MessageView.vue","mtime":1626530347663},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01lc3NhZ2VWaWV3JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHQ6IHsKICAgICAgICAgIHJvd3M6IFtdCiAgICAgIH0sCiAgICAgIGRpYWxvZzp7CiAgICAgICAgbWVzc2FnZTp7CiAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgZmlsdGVyczp7CiAgICBmb3JtYXRTdHIodmFsKXsKICAgICAgcmV0dXJuIF8udHJ1bmNhdGUodmFsKTsKICAgIH0sCiAgICBmb3JtYXREYXRlKHZhbCl7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh2YWwpLnRvTG9jYWxlU3RyaW5nKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0RGF0YSgpIHsKICAgICAgdGhpcy5tMy5jYWxsRlMoIi9tYXRyaXgvbTNldmVudC9tZXNzYWdlL2dldE1lc3NhZ2UuanMiKS50aGVuKHJ0bj0+ewogICAgICAgIHRoaXMuZHQucm93cyA9IHJ0bi5tZXNzYWdlOwogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["MessageView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MessageView.vue","sourceRoot":"src/components/message","sourcesContent":["<template>\n  <div>\n    <el-badge :is-dot=\"true\" style=\"line-height: 25px;margin-top: 5px;\" @click.native=\"dialog.message.show = true;\">\n      <el-button style=\"padding: 5px;\" size=\"small\" type=\"primary\">\n        <svg-icon icon-class=\"message\" style=\"width: 1.2em;height: 1.2em;\"/>\n      </el-button>\n    </el-badge>\n\n    <el-dialog :visible.sync=\"dialog.message.show\"\n      append-to-body \n      custom-class=\"message-dialog\"\n      @show=\"initData\">\n      \n      <div slot=\"title\">\n        <h3>消息</h3>\n        <!-- <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-delete\" @click=\"onClearAll\">清理消息</el-button> -->\n      </div>\n      <el-container style=\"height: calc(100vh - 440px);\">\n        <el-main style=\"overflow:hidden;\">\n            <el-tabs value=\"audit\" type=\"border-card\">\n              <el-tab-pane label=\"消息\" name=\"message\"></el-tab-pane>\n              <el-tab-pane label=\"系统日志\" name=\"audit\">\n                <ul class=\"infinite-list\" v-infinite-scroll=\"initData\" style=\"overflow:auto;height:calc(100vh - 530px);\">\n                  <li v-for=\"row in dt.rows\" class=\"infinite-list-item\" :key=\"row.id\">\n                    {{ row.user }} <el-divider direction=\"vertical\"></el-divider> \n                    {{ row.module }} <el-divider direction=\"vertical\"></el-divider>\n                    <el-popover\n                      placement=\"top-start\"\n                      width=\"200\"\n                      trigger=\"hover\"\n                      :content=\"row.operation\">\n                      <el-button slot=\"reference\">{{ row.operation | formatStr }}</el-button>\n                    </el-popover>\n                    <el-divider direction=\"vertical\"></el-divider>\n                    {{ row.source }} <el-divider direction=\"vertical\"></el-divider>\n                    {{ row.vtime | formatDate}}</li>\n                </ul>\n              </el-tab-pane>\n            </el-tabs>\n        </el-main>\n      </el-container>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\nexport default {\n  name: 'MessageView',\n  data() {\n    return {\n      dt: {\n          rows: []\n      },\n      dialog:{\n        message:{\n          show: false\n        }\n      }\n    }\n  },\n  filters:{\n    formatStr(val){\n      return _.truncate(val);\n    },\n    formatDate(val){\n      return new Date(val).toLocaleString();\n    }\n  },\n  methods: {\n    initData() {\n      this.m3.callFS(\"/matrix/m3event/message/getMessage.js\").then(rtn=>{\n        this.dt.rows = rtn.message;\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .infinite-list {\n      height: 100%;\n      padding: 0;\n      margin: 0;\n      list-style: none;\n  }\n\n  .infinite-list .infinite-list-item {\n      display: flex;\n      align-items: center;\n      justify-content: left;\n      height: 40px;\n      background: #f2f2f2;\n      margin: 10px;\n      color: #101323;\n      padding:0 20px;\n  }\n</style>\n\n<style>\n  .message-dialog.el-dialog {\n      width: 60vw!important;\n      height: 70vh;\n  }\n</style>"]}]}